{
  "query": "CREATE TABLE `approvals` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`projectId` int NOT NULL,\n\t`approverId` int NOT NULL,\n\t`status` enum('approved','rejected') NOT NULL,\n\t`comments` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `approvals_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `auditTrail` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`projectId` int,\n\t`action` varchar(255) NOT NULL,\n\t`details` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `auditTrail_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `formSubmissions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`templateId` int NOT NULL,\n\t`data` json NOT NULL,\n\t`submittedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `formSubmissions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `formTemplates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`fields` json NOT NULL,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `formTemplates_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `forms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`s3Key` varchar(500) NOT NULL,\n\t`s3Url` varchar(1000) NOT NULL,\n\t`fileType` varchar(100),\n\t`fileSize` int,\n\t`uploadedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `forms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `milestones` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`stage` int NOT NULL,\n\t`status` enum('pending','in_progress','completed','rejected') NOT NULL DEFAULT 'pending',\n\t`approverRole` enum('brand_manager','ppic_manager','production_manager','purchasing_manager','sales_manager','pr_manager','director') NOT NULL,\n\t`isViewOnly` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `milestones_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `projects` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`sku` varchar(100),\n\t`pafSequence` varchar(100),\n\t`mafSequence` varchar(100),\n\t`isOem` boolean NOT NULL DEFAULT false,\n\t`status` enum('pending','in_progress','completed','discontinued') NOT NULL DEFAULT 'pending',\n\t`currentStage` int NOT NULL DEFAULT 1,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `projects_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `projects_sku_unique` UNIQUE(`sku`),\n\tCONSTRAINT `projects_pafSequence_unique` UNIQUE(`pafSequence`),\n\tCONSTRAINT `projects_mafSequence_unique` UNIQUE(`mafSequence`)\n);\n\nCREATE TABLE `sequenceConfig` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` enum('sku','paf','maf') NOT NULL,\n\t`prefix` varchar(50) NOT NULL DEFAULT '',\n\t`suffix` varchar(50) NOT NULL DEFAULT '',\n\t`currentNumber` int NOT NULL DEFAULT 1,\n\t`maxPerMonth` int,\n\t`resetFrequency` enum('monthly','yearly','never') NOT NULL DEFAULT 'never',\n\t`lastReset` timestamp,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `sequenceConfig_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `sequenceConfig_type_unique` UNIQUE(`type`)\n);\n\nCREATE TABLE `sequences` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` enum('sku','paf','maf') NOT NULL,\n\t`sequence` varchar(100) NOT NULL,\n\t`projectId` int,\n\t`generatedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `sequences_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `sequences_sequence_unique` UNIQUE(`sequence`)\n);\n\nALTER TABLE `users` MODIFY COLUMN `role` enum('admin','brand_manager','ppic_manager','production_manager','purchasing_manager','sales_manager','pr_manager','director') NOT NULL DEFAULT 'brand_manager';\n\nALTER TABLE `users` ADD `isActive` boolean DEFAULT true NOT NULL;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user Y8fKT2LsvR8QMXV.893c95ef4fb6 --database CpEi2h5S6ugwixFhxmPzAJ --execute CREATE TABLE `approvals` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`projectId` int NOT NULL,\n\t`approverId` int NOT NULL,\n\t`status` enum('approved','rejected') NOT NULL,\n\t`comments` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `approvals_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `auditTrail` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`projectId` int,\n\t`action` varchar(255) NOT NULL,\n\t`details` json,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `auditTrail_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `formSubmissions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`templateId` int NOT NULL,\n\t`data` json NOT NULL,\n\t`submittedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `formSubmissions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `formTemplates` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`fields` json NOT NULL,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `formTemplates_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `forms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`milestoneId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`s3Key` varchar(500) NOT NULL,\n\t`s3Url` varchar(1000) NOT NULL,\n\t`fileType` varchar(100),\n\t`fileSize` int,\n\t`uploadedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `forms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `milestones` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`projectId` int NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`stage` int NOT NULL,\n\t`status` enum('pending','in_progress','completed','rejected') NOT NULL DEFAULT 'pending',\n\t`approverRole` enum('brand_manager','ppic_manager','production_manager','purchasing_manager','sales_manager','pr_manager','director') NOT NULL,\n\t`isViewOnly` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `milestones_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `projects` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(255) NOT NULL,\n\t`sku` varchar(100),\n\t`pafSequence` varchar(100),\n\t`mafSequence` varchar(100),\n\t`isOem` boolean NOT NULL DEFAULT false,\n\t`status` enum('pending','in_progress','completed','discontinued') NOT NULL DEFAULT 'pending',\n\t`currentStage` int NOT NULL DEFAULT 1,\n\t`createdBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `projects_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `projects_sku_unique` UNIQUE(`sku`),\n\tCONSTRAINT `projects_pafSequence_unique` UNIQUE(`pafSequence`),\n\tCONSTRAINT `projects_mafSequence_unique` UNIQUE(`mafSequence`)\n);\n\nCREATE TABLE `sequenceConfig` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` enum('sku','paf','maf') NOT NULL,\n\t`prefix` varchar(50) NOT NULL DEFAULT '',\n\t`suffix` varchar(50) NOT NULL DEFAULT '',\n\t`currentNumber` int NOT NULL DEFAULT 1,\n\t`maxPerMonth` int,\n\t`resetFrequency` enum('monthly','yearly','never') NOT NULL DEFAULT 'never',\n\t`lastReset` timestamp,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `sequenceConfig_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `sequenceConfig_type_unique` UNIQUE(`type`)\n);\n\nCREATE TABLE `sequences` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` enum('sku','paf','maf') NOT NULL,\n\t`sequence` varchar(100) NOT NULL,\n\t`projectId` int,\n\t`generatedBy` int NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `sequences_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `sequences_sequence_unique` UNIQUE(`sequence`)\n);\n\nALTER TABLE `users` MODIFY COLUMN `role` enum('admin','brand_manager','ppic_manager','production_manager','purchasing_manager','sales_manager','pr_manager','director') NOT NULL DEFAULT 'brand_manager';\n\nALTER TABLE `users` ADD `isActive` boolean DEFAULT true NOT NULL;",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 5268
}