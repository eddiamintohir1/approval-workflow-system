{
  "query": "CREATE TABLE workflow_approvals (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36) NOT NULL,\n  approver_id int NOT NULL,\n  approver_role varchar(50) NOT NULL,\n  action enum('approved', 'rejected', 'commented') NOT NULL,\n  comments text,\n  created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_approvals_workflow (workflow_id),\n  INDEX idx_approvals_stage (stage_id),\n  INDEX idx_approvals_approver (approver_id),\n  INDEX idx_approvals_action (action),\n  INDEX idx_approvals_created (created_at)\n);\n\nCREATE TABLE workflow_files (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36),\n  file_name varchar(500) NOT NULL,\n  file_type varchar(50) NOT NULL,\n  file_category varchar(50),\n  s3_bucket varchar(255) NOT NULL,\n  s3_key varchar(1000) NOT NULL,\n  s3_url text,\n  file_size bigint,\n  mime_type varchar(100),\n  uploaded_by int NOT NULL,\n  uploaded_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_files_workflow (workflow_id),\n  INDEX idx_files_stage (stage_id),\n  INDEX idx_files_type (file_type),\n  INDEX idx_files_uploader (uploaded_by),\n  INDEX idx_files_s3_key (s3_key(255))\n);\n\nCREATE TABLE workflow_comments (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36),\n  comment_text text NOT NULL,\n  comment_type varchar(50) DEFAULT 'general',\n  author_id int NOT NULL,\n  author_role varchar(50),\n  created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_comments_workflow (workflow_id),\n  INDEX idx_comments_stage (stage_id),\n  INDEX idx_comments_author (author_id),\n  INDEX idx_comments_created (created_at)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user Y8fKT2LsvR8QMXV.893c95ef4fb6 --database CpEi2h5S6ugwixFhxmPzAJ --execute CREATE TABLE workflow_approvals (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36) NOT NULL,\n  approver_id int NOT NULL,\n  approver_role varchar(50) NOT NULL,\n  action enum('approved', 'rejected', 'commented') NOT NULL,\n  comments text,\n  created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_approvals_workflow (workflow_id),\n  INDEX idx_approvals_stage (stage_id),\n  INDEX idx_approvals_approver (approver_id),\n  INDEX idx_approvals_action (action),\n  INDEX idx_approvals_created (created_at)\n);\n\nCREATE TABLE workflow_files (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36),\n  file_name varchar(500) NOT NULL,\n  file_type varchar(50) NOT NULL,\n  file_category varchar(50),\n  s3_bucket varchar(255) NOT NULL,\n  s3_key varchar(1000) NOT NULL,\n  s3_url text,\n  file_size bigint,\n  mime_type varchar(100),\n  uploaded_by int NOT NULL,\n  uploaded_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_files_workflow (workflow_id),\n  INDEX idx_files_stage (stage_id),\n  INDEX idx_files_type (file_type),\n  INDEX idx_files_uploader (uploaded_by),\n  INDEX idx_files_s3_key (s3_key(255))\n);\n\nCREATE TABLE workflow_comments (\n  id varchar(36) PRIMARY KEY,\n  workflow_id varchar(36) NOT NULL,\n  stage_id varchar(36),\n  comment_text text NOT NULL,\n  comment_type varchar(50) DEFAULT 'general',\n  author_id int NOT NULL,\n  author_role varchar(50),\n  created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  metadata json DEFAULT ('{}'),\n  INDEX idx_comments_workflow (workflow_id),\n  INDEX idx_comments_stage (stage_id),\n  INDEX idx_comments_author (author_id),\n  INDEX idx_comments_created (created_at)\n);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 10 column 30 near \"'{}'),",
    "  INDEX idx_approvals_workflow (workflow_id),",
    "  INDEX idx_approvals_stage (stage_id),",
    "  INDEX idx_approvals_approver (approver_id),",
    "  INDEX idx_approvals_action (action),",
    "  INDEX idx_approvals_created (created_at)",
    ")\""
  ]
}